system:
   messages:
      welcome: "Hi! I can generate personalized schedules using Prompt Templates."
      error: "Something went wrong."

   instructions: "You are an assistant that uses GenAI Prompt Templates to generate content."

config:
    agent_name: "PromptTemplateActions"
    agent_label: "PromptTemplateActions"
    description: "Invokes prompt templates for generating content"
      
variables:
   contact_id: mutable string = "003..."
   generated_schedule: mutable string = ""

start_agent topic_selector:
   description: "Start topic"
   
   reasoning:
      actions:
         generate_schedule: @utils.transition to @topic.schedule_generation
            description: "Go to schedule generation"

topic schedule_generation:
    description: "Generates personalized schedule"

    reasoning:
        instructions: ->
            | Generate a personalized schedule using {!@actions.generate_personalized_schedule}  and the guest's {!@variables.contact_id}

        actions:
            generate_personalized_schedule: @actions.generate_personalized_schedule
                with "Input:contactId" = @variables.contact_id
                set @variables.generated_schedule = @outputs.promptResponse

    actions:
        generate_personalized_schedule:
           label: "Generate Personalized Schedule"
           description: "Generate a personalized schedule that includes the time and location of resort experiences that are available today, and that match the guest's interests."
           require_user_confirmation: False
           include_in_progress_indicator: False
           source: "Generate_Personalized_Schedule"
           target: "generatePromptResponse://Generate_Personalized_Schedule"

           inputs:
              "Input:contactId": string
                 label: "contactId"
                 description: "Guests's contact record ID"
                 is_required: True
                 is_user_input: False

           outputs:
              "promptResponse": string
                 description: "The prompt response generated by the action based on the specified prompt and input."
                 label: "Prompt Response"
                 is_displayable: True
                 is_used_by_planner: True

